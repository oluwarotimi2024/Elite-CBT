<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOT JAMB Master | Elite CBT</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root { 
            --sot-blue: #002D62; 
            --sot-gold: #FFD700; 
            --sot-light: #f4f7f6;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        
        body { 
            background-color: var(--sot-light); 
            min-height: 100vh; 
            display: flex;
            flex-direction: column;
            justify-content: center; /* Centers content vertically */
            align-items: center; /* Centers content horizontally */
        }

        .app-header { 
            background: var(--sot-blue); 
            color: white; 
            padding: 20px; 
            text-align: center; 
            border-bottom: 5px solid var(--sot-gold); 
            width: 100%;
            position: fixed;
            top: 0;
            z-index: 1000;
        }

        .page { 
            display: none; 
            width: 100%; 
            padding: 20px; 
            margin-top: 120px; /* Space for fixed header */
            margin-bottom: 80px; /* Space for footer */
        }
        
        .active-page { display: flex; flex-direction: column; align-items: center; animation: fadeIn 0.4s; }

        .card { 
            background: white; 
            padding: 30px; 
            border-radius: 20px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); 
            width: 100%; 
            max-width: 500px; 
            border-top: 4px solid var(--sot-blue);
        }

        .btn { 
            width: 100%; 
            padding: 15px; 
            margin: 10px 0; 
            border: none; 
            border-radius: 10px; 
            font-weight: bold; 
            cursor: pointer; 
            transition: 0.3s;
            text-transform: uppercase;
        }

        .btn-blue { background: var(--sot-blue); color: white; }
        .btn-blue:hover { background: #001a3a; transform: translateY(-2px); }
        
        .btn-nav { width: 32%; background: #e0e0e0; color: #333; }
        .btn-red { background: #d32f2f; color: white; }

        .option { 
            display: block; 
            padding: 15px; 
            margin: 10px 0; 
            border: 2px solid #eee; 
            border-radius: 10px; 
            cursor: pointer; 
            transition: 0.2s;
        }

        .option.selected { border-color: var(--sot-blue); background: #eef3ff; font-weight: bold; }

        input, select, textarea { 
            width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; 
            border: 1px solid #ccc; font-size: 1rem;
        }

        .sot-footer { 
            background: var(--sot-blue); 
            color: white; 
            text-align: center; 
            padding: 15px; 
            position: fixed; 
            bottom: 0; 
            width: 100%; 
            border-top: 3px solid var(--sot-gold);
            font-size: 0.85rem;
            letter-spacing: 1px;
        }

        @keyframes fadeIn { from {opacity: 0; transform: translateY(10px);} to {opacity: 1; transform: translateY(0);} }

        /* Printout Styling */
        #sot-slip { padding: 40px; color: black; background: white; border: 5px double var(--sot-blue); }
    </style>
</head>
<body>

<header class="app-header">
    <h1>SOT JAMB MASTER</h1>
</header>

<div id="page-login" class="page active-page">
    <div class="card" style="text-align:center;">
        <h2 style="color: var(--sot-blue); margin-bottom: 20px;">Candidate Login</h2>
        <input type="text" id="std-name" placeholder="Surname First (e.g., ADAMS John)">
        <button class="btn btn-blue" onclick="navDept('science')">SCIENCE DEPT</button>
        <button class="btn btn-blue" onclick="navDept('art')">ART DEPT</button>
        <button class="btn btn-blue" onclick="navDept('commercial')">COMMERCIAL DEPT</button>
        <p onclick="showAdmin()" style="margin-top:20px; font-size:0.75rem; color:gray; cursor:pointer;">ADMIN ACCESS</p>
    </div>
</div>

<div id="page-subs" class="page">
    <div class="card" style="text-align:center;">
        <h2 id="dept-title" style="color: var(--sot-blue); margin-bottom:15px;"></h2>
        <div id="sub-list"></div>
        <button class="btn" style="background:#666; color:white;" onclick="goHome()">BACK</button>
    </div>
</div>

<div id="page-exam" class="page">
    <div class="card">
        <div style="display:flex; justify-content:space-between; margin-bottom: 15px;">
            <span id="label-sub" style="font-weight:bold; color:var(--sot-blue);"></span>
            <span id="timer" style="color:red; font-weight:bold;">30:00</span>
        </div>
        <h3 id="q-text" style="margin-bottom:20px;"></h3>
        <div id="opt-container"></div>
        <div style="display:flex; justify-content: space-between; margin-top:20px;">
            <button class="btn btn-nav" onclick="prevQ()">PREV</button>
            <button class="btn btn-nav" style="background:red; color:white;" onclick="confirmSubmit()">SUBMIT</button>
            <button class="btn btn-nav" style="background:var(--sot-blue); color:white;" onclick="nextQ()">NEXT</button>
        </div>
    </div>
</div>

<div id="page-result" class="page">
    <div class="card" style="text-align:center;">
        <h2 style="color: var(--sot-blue);">EXAM RESULT</h2>
        <h1 id="score-raw" style="font-size:4rem; margin: 15px 0;"></h1>
        <p id="score-percent" style="font-weight:bold; font-size:1.2rem; color: green; margin-bottom:20px;"></p>
        <button class="btn btn-blue" style="background:green;" onclick="downloadResult()">DOWNLOAD RESULT SLIP</button>
        <button class="btn btn-blue" onclick="location.reload()">RESTART</button>
    </div>
</div>

<div id="page-admin" class="page">
    <div class="card">
        <h2 style="color: var(--sot-blue);">Admin Portal</h2>
        <input type="text" id="adm-sub" placeholder="Subject Name">
        <textarea id="adm-q" placeholder="Question"></textarea>
        <input type="text" id="adm-o1" placeholder="Correct Answer">
        <input type="text" id="adm-o2" placeholder="Wrong 1">
        <button class="btn btn-blue" onclick="addQuestion()">SAVE QUESTION</button>
        <button class="btn" style="background:#333; color:white;" onclick="goHome()">LOGOUT</button>
    </div>
</div>

<footer class="sot-footer">
    ELITE CBT ENGINE &copy; 2026 | DESIGNED BY <strong>OLUWAROTIMI SOT</strong>
</footer>

<div id="sot-slip" style="display:none; text-align: center;">
    <h1 style="color: #002D62; font-size: 28px;">SOT JAMB MASTER</h1>
    <p>Official Performance Report</p>
    <hr style="margin: 15px 0;">
    <h2 id="slip-name" style="text-transform: uppercase;"></h2>
    <h3 id="slip-sub"></h3>
    <h1 id="slip-score" style="font-size: 50px; color: #002D62;"></h1>
    <div id="slip-corrections" style="text-align: left; margin-top: 20px;"></div>
    <hr style="margin: 20px 0;">
    <p style="font-size: 12px; color: gray;">Verified by: <strong>Oluwarotimi SOT</strong> | Elite CBT System</p>
</div>

<script>
    // Copy your existing script logic here (navDept, startExam, renderQ, etc.)
    // Ensure you include the PWA Registration at the bottom:
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./sw.js');
    }
</script>
</body>
</html>
